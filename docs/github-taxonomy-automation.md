# GitHub Automation for Taxonomy

This document describes the GitHub automation used with the [Taxonomy](https://github.com/instruct-lab/taxonomy) repository.

## Key Components

### Instruct Lab Bot

There is a [GitHub bot](https://github.com/instruct-lab/instruct-lab-bot) used to facilitate this automation. This bot receives GitHub events and performs actions on behalf of different components within Instruct Lab. More details on the architect of the bot itself can be found in its repository.

### Mergify (future)

[Mergify](https://docs.mergify.com) is a tool that can perform workflow automation for a GitHub repository. It can be used to implement a variety of automation tasks, such as automatically merging PRs when certain conditions are met. While not yet in use, it should be kept in mind for future needs.

## Points of Interaction

### Pre-Check Using the Existing Model

The trigger for this step should be a PR comment with the following format:

```text
@instruct-lab-bot precheck
```

At this point, the bot will kick off a process that will run the questions from the `qna.yaml` against the target model as it exists before this proposed addition. The intent is to allow contributors and reviewers to see if the proposed addition is already a capability of the model.

When the process is complete, the bot will post a comment with instructions on how to access the results.

### Synthetic Data Generation Check

The trigger for this step should be a PR comment with the following format:

```text
@instruct-lab-bot generate
```

At this point, the bot will kick off a process that will generate a sample of synthetic data generated by a teacher model. This is to allow contributors and reviewers to determine if the synthetic data generated as a result of the proposed addition is reasonable.

When the process is complete, the bot will post a comment with instructions on how to access the results.

### Publishing Report

At the end of the backend pipeline, there is a need to post content back to a PR with the results of the pipeline. This data may include:

* Benchmarking results after training a model that included this PR
* Where the model was published, assuming it was successful

To help facilitate this need with minimal friction, the bot can provide a queue for generic PR comments where an Instruct Lab component can formulate its own comment text in GitHub-flavored markdown format and queue it up for the bot to post on its behalf.

This allows all comments to come from the same bot user, which will provide a uniform experience for contributors and reviewers interacting with this workflow.

### Triggering the Backend Pipeline

At some point, there is a need to trigger the backend pipeline to run its full process. Automation should help enable this. This document needs to be updated with additional details on this.